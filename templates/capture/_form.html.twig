<div class="row">
    <div class="col-md-6">
        <div class="mb-2 d-flex align-items-center gap-2">
            <div class="text-muted small mb-0">Nom :</div>
            <div class="fw-semibold">{{ capture.name }}</div>
        </div>

        <div class="mb-2 d-flex align-items-center gap-2">
            <div class="text-muted small mb-0">Description :</div>
            <div class="fw-semibold">{{ capture.description }}</div>
        </div>

        <div class="mb-2 d-flex align-items-center gap-2">
            <div class="text-muted small mb-0">Compte :</div>
            <div class="fw-semibold">{{ capture.account.name }}</div>
        </div>

    </div>


    <div class="col-md-6">
        {% include 'components/button/_btn_bar.html.twig' with {
            buttons: {
                preview_render: {
                    type: 'link',
                    route: 'app_capture_render_text_preview',
                    param_map: { id: 'capture.id' },
                    icon: 'bi-pencil',
                    label: 'Aperçu du rendu',
                    class: 'btn btn-outline-primary btn-sm'
                },
                back: {
                    type: 'link',
                    label: 'Retour',
                    icon: 'bi-arrow-left',
                    route: 'app_capture_index',
                    class: 'btn btn-outline-primary'
                },
            }
        } %}
    </div>

</div>
<div
    data-controller="tabs-persist"
    data-tabs-persist-default-tab-value="#capture-elements"
    data-tabs-persist-storage-key-value="captureTabs"
    data-tabs-persist-mode-value="storage"
>
    <ul class="tabs tabs--primary my-3 nav" role="tablist">
        <li class="tab nav-item" role="presentation">
            <a id="tab-capture-elements" class="tab__link nav-link" data-bs-toggle="tab" href="#capture-elements"
               role="tab"
               aria-controls="capture-elements"
               aria-selected="false">Eléments de capture</a>
        </li>
        <li class="tab nav-item" role="presentation">
            <a id="tab-roles" class="tab__link nav-link" data-bs-toggle="tab" href="#roles" role="tab"
               aria-controls="roles"
               aria-selected="true">Rôles</a>
        </li>
    </ul>
</div>
<div class="tab-content">
    <div id="capture-elements" class="tab-pane fade" role="tabpanel" aria-labelledby="tab-capture-elements">
        <div class="mx-2">
            {% set byTarget = conditionsByTargetId|default({}) %}

            {% if elementForms is defined and elementForms|length > 0 %}
                {% for elementId, elementForm in elementForms %}
                    {% set captureElement = elementForm.vars.value ?? null %}
                    {% set incoming = elementId is not null ? (byTarget[elementId] ?? []) : [] %}

                    {% include 'capture/capture_element/_prototype_form_card.html.twig' with {
                        elementForm: elementForm,
                        captureElement: captureElement,
                        incomingConditions: incoming
                    } %}
                {% endfor %}
            {% else %}

                <div class="text-muted small">Aucun élément</div>
            {% endif %}
        </div>

    </div>
    <div id="roles" class="tab-pane fade" role="tabpanel" aria-labelledby="tab-roles">
        {# {% include 'participant_role/_required_participant_roles.html.twig' with { capture: form.vars.data } %} #}
    </div>
</div>






