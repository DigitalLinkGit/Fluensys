{{ form_start(form) }}

    {{ include('capture/capture_element/_form_base.html.twig') }}

<div class="d-flex justify-content-end gap-2 mt-4">
    {% include 'components/button/_btn.html.twig' with {
        btn: {
            type: 'link',
            label: 'Aperçu',
            icon: 'bi-eye',
            route: 'app_capture_element_preview',
            param_map: { id: 'element.id' },
            class: 'btn btn-outline-primary'
        }
    } %}
    {% include 'components/button/_btn.html.twig' with {
        btn: {
            type: 'link',
            label: 'Editer le rendu',
            icon: 'bi-pencil',
            route: 'app_capture_element_render_text_edit',
            param_map: { id: 'element.id' },
            class: 'btn btn-outline-primary'
        }
    } %}

    {% include 'components/button/_btn.html.twig' with {
        btn: {
            type: 'link',
            label: 'Retour',
            icon: 'bi-arrow-left',
            route: 'app_capture_template_edit',
            param_map: { id: 'captureId' },
            class: 'btn btn-outline-primary'
        }
    } %}

    {% include 'components/button/_btn.html.twig' with {
        btn: {
            type: 'submit',
            label: 'Enregistrer',
            icon: 'bi-check',
            class: 'btn btn-primary'
        }
    } %}
</div>


{% set prototype %}
    {% include 'capture/field/_field_prototype.html.twig' with { form: form.fields.vars.prototype } %}
{% endset %}
<div class="row p-3 " data-controller="capture-element">

    <div class="col-md-9 p-3">
        <div
            class="drop-zone d-flex align-items-center justify-content-center text-center border border-2 border-dashed rounded-3 p-3"
            data-action="dragenter->capture-element#dragEnter dragover->capture-element#dragOver drop->capture-element#drop">
            Glissez-déposez des champs ici
        </div>

        <div data-prototype="{{ prototype|e('html_attr') }}">
            {% for fieldForm in form.fields %}
                {% include 'capture/field/_field_prototype.html.twig' with { form: fieldForm } %}
            {% endfor %}
        </div>

    </div>
    <div class="col-md-3 p-3">
        {% include 'capture/field/_available_fields_type.html.twig' %}
    </div>
</div>


{{ form_end(form) }}
